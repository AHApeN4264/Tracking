{% extends 'base.html' %}
{% load static %}

{% block title %}
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</title>
    <link rel="icon" type="image/x-icon" href="{% static 'icons/icons8-brutus-32.ico' %}">
    <link rel="stylesheet" href="{% static 'css/settings.css' %}">
{% endblock %}

{% block body %}
<div class="username-display">
  {% if user.username %}
    <a href="/settings" class="login-link">üë§ {{ user.username }}</a>
    <a href="/wallet" class="login-link">({{ user.wallet }})</a>
  {% else %}
    üë§ –í–∏ –Ω–µ —É–≤—ñ–π—à–ª–∏ –≤ –∞–∫–∞—É–Ω—Ç<br>
    <a href="/login" class="login-link">–£–≤—ñ–π—Ç–∏</a>
  {% endif %}
  <div class="switch-wrapper">
    <label class="switch" title="–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Ç–µ–º—É">
      <input type="checkbox" id="themeToggle" aria-label="Theme toggle">
      <span class="slider"></span>
    </label>
  </div>
</div>

<div class="vertical-menu">
  <button onclick="location.href='/user-profile/{{ user.id }}'">–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</button>
  <button onclick="location.href='/user-data'">–î–∞–Ω–Ω—ñ –∞–∫–∞—É–Ω—Ç–∞</button>
  <button onclick="location.href='/buy-subscription'">–ö—É–ø–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É</button>
  <form method="post" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit">–í–∏–π—Ç–∏ –∑ –∞–∫–∞—É–Ω—Ç—É</button>
  </form>
</div>

<div id="menu" class="styled-button" onclick="redirectToMenu()">
  üî•
  <span style="color: #6a5acd; text-decoration: none; font-weight: bold;">–ú–µ–Ω—é</span>
  üî•
</div>

<style>
html{
  height: 100%;
  margin: 0;
  padding: 0;
  background: linear-gradient(135deg, #00ff55, #012df3);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: Arial, sans-serif;
}

.vertical-menu {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.vertical-menu button {
  padding: 15px 30px;
  font-size: 20px;
  font-weight: 600;
  color: white;
  background-color: #4a90e2;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.vertical-menu button:hover {
  background-color: #357ABD;
}

.vertical-menu button,
.vertical-menu form button {
    display: block;        /* —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    width: 100%;           /* –ø–æ–ª–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
    padding: 15px 30px;    /* –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—Å—Ç—É–ø */
    font-size: 20px;
    font-weight: 600;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    color: white;
    background-color: #4a90e2;
    transition: background-color 0.3s ease;
}

.vertical-menu button:hover,
.vertical-menu form button:hover {
    background-color: #357ABD;
}


.message {
  color: green;
  font-weight: bold;
}

.error-msg {
  color: red;
  font-weight: bold;
}

body.dark-theme {
  background: linear-gradient(135deg, #141E30, #243B55);
  color: white;
}

body.dark-theme .vertical-menu button {
  background-color: #333;
  color: white;
  border: 1px solid #555;
}

body.dark-theme .username-display a {
  color: white;
}

body {
  background: transparent;
}

html.dark-theme {
  background: linear-gradient(135deg, #141E30, #243B55);/
  color: white;
}

html.dark-theme body {
  color: white;
}

html.dark-theme .vertical-menu button {
  background-color: #333;
  color: white;
  border: 1px solid #555;
}

html.dark-theme .username-display a {
  color: #fff;
}

/* –Ω–∏–∫ */
.username-display {
  position: absolute;
  top: 10px;
  right: 20px;
  font-weight: bold;
  font-size: 16px;
  color: #333;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 6px;
} 

.username-display a {
  color: #000;
  text-decoration: none;
}

/* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã */
.switch-wrapper {
  margin-top: 6px;
}

.switch {
  font-size: 17px;
  display: inline-block;
  width: 3.5em;
  height: 2em;
  position: relative;
}
  
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  --background: #28096b;
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--background);
  transition: .5s;
  border-radius: 30px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 1.4em;
  width: 1.4em;
  border-radius: 50%;
  left: 10%;
  bottom: 15%;
  box-shadow: inset 8px -4px 0px 0px #fff000;
  background: var(--background);
  transition: .5s;
}

input:checked + .slider {
  background-color: #522ba7;
}

input:checked + .slider:before {
  transform: translateX(100%);
  box-shadow: inset 15px -4px 0px 15px #fff000;
}

/* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–µ–Ω—é –∫–Ω–æ–ø–æ–∫ */
.vertical-menu {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.vertical-menu button {
  padding: 15px 30px;
  font-size: 20px;
  font-weight: 600;
  color: white;
  background-color: #4a90e2;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.vertical-menu button:hover {
  background-color: #357ABD;
}

.menu-button-wrapper {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 1000;
}

.styled-button {
  position: fixed;
  top: 10px;      
  left: 10px;     
  z-index: 1000;  
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: linear-gradient(90deg, #00caf3, #66b2ed);
  color: #5f2eea;
  font-family: Arial, sans-serif;
  font-size: 16px;
  font-weight: bold;
  padding: 10px 20px;
  border: none;
  border-radius: 20px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  text-decoration: none;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.styled-button span {
  color: #6a5acd;
  text-decoration: none;
  font-weight: bold;
}

.styled-button:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
}
</style>

<script>
    function redirectToMenu() {
        window.location.href = "/menu/{{ user.id }}";
    }
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("themeToggle");
    const html = document.documentElement;

    if (localStorage.getItem("darkTheme") === "true") {
      html.classList.add("dark-theme");
      toggle.checked = true;
    }

    toggle.addEventListener("change", function () {
      html.classList.toggle("dark-theme", this.checked);
      localStorage.setItem("darkTheme", this.checked);
    });
  });
</script>
{% endblock %}
