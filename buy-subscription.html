{% extends 'base.html' %}
{% load static %}

{% block title %}
  <title>{{ title }}</title>
  <link rel="icon" type="image/x-icon" href="{% static 'icons/icons8-brutus-32.ico' %}">
  <link rel="stylesheet" href="{% static 'css/buy-subscription.css' %}">
{% endblock %}

{% block body %}
<div class="username-display">
  {% if user.username %}
    <a href="/settings" class="login-link">üë§ {{ user.username }}</a>
    <a href="/wallet" class="login-link">({{ user.wallet }})</a>
  {% else %}
    üë§ –í–∏ –Ω–µ —É–≤—ñ–π—à–ª–∏ –≤ –∞–∫–∞—É–Ω—Ç<br>
    <a href="/login" class="login-link">–£–≤—ñ–π—Ç–∏</a>
  {% endif %}
  <div class="switch-wrapper">
    <label class="switch" title="–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Ç–µ–º—É">
      <input type="checkbox" id="themeToggle" aria-label="Theme toggle">
      <span class="slider"></span>
    </label>
  </div>
</div>

<div class="background" style="padding: 40px; display: flex; justify-content: center;">
  <div class="container">
    <h2>{{ title }}</h2>
      {% if messages %}
        {% for message in messages %}
          <p class="
            {% if 'success' in message.tags %}message
            {% elif 'error' in message.tags %}error-msg
            {% else %}info-msg
            {% endif %}
          ">
            {{ message }}
          </p>
        {% endfor %}
      {% endif %}
    <h3>–ù–∞ —Å–∫—ñ–ª—å–∫–∏ –±–∞–∂–∞—î—Ç–µ –∫—É–ø–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É?</h3>

  <form method="post" action="{% url 'buy_subscription' %}" style="margin-bottom: 20px;">
    {% csrf_token %}
    <div style="display: flex; gap: 20px; flex-wrap: wrap;">

      <div style="width: 100%; text-align: center;">
        <button type="submit" name="amount" value="1 minute" class="btn-amount">–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞ 1 —Ö–≤–∏–ª–∏–Ω–∞</button><br>
        <small>0 –≥—Ä–Ω</small>
      </div>

      <div style="width: 100%; text-align: center;">
        <button type="submit" name="amount" value="1 hours" class="btn-amount">1 –≥–æ–¥–∏–Ω–∞</button><br>
        <small>1 –≥—Ä–Ω</small>
      </div>

      <div style="text-align: center;">
        <button type="submit" name="amount" value="1" class="btn-amount">1 –¥–µ–Ω—å</button><br>
        <small>10 –≥—Ä–Ω</small>
      </div>

      <div style="text-align: center;">
        <button type="submit" name="amount" value="10" class="btn-amount">10 –¥–Ω—ñ–≤</button><br>
        <small>50 –≥—Ä–Ω</small>
      </div>

      <div style="text-align: center;">
        <button type="submit" name="amount" value="30" class="btn-amount">30 –¥–Ω—ñ–≤</button><br>
        <small>100 –≥—Ä–Ω</small>
      </div>
    </div>
  </form>

    <h3 style="margin-top: 20px;">–í–∞—à –±–∞–ª–∞–Ω—Å: {{ user.wallet }} –≥—Ä–Ω</h3>
    <button type="button"
      onclick="window.location.href='/menu/{{ user.id }}'"
        style="margin-top: 10px; width: 100%; padding: 10px;
          background-color: #ff0000; color: white;
          border: none; border-radius: 6px;
          font-weight: bold; cursor: pointer;">
      –ú–µ–Ω—é
    </button>
  </div>
</div>

<style>
html{
  height: 100%;
  margin: 0;
  padding: 0;
  background: linear-gradient(135deg, #ff9d3b, #ff0000);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: Arial, sans-serif;
}

html.dark-theme {
  background: linear-gradient(135deg, #8c561f, #9a0000);
  color: white;
}

/* –ö–Ω–æ–ø–∫–∏ —Å —Å—É–º–º–∞–º–∏ */
.btn-amount {
  padding: 10px 20px;
  border: 2px solid #ff0000;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  background: none;
  color: inherit;
  transition: background-color 0.3s ease, color 0.3s ease;
}

.btn-amount:hover {
  background-color: #ff0000;
  color: white;
}
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("themeToggle");
    const html = document.documentElement;

    if (localStorage.getItem("darkTheme") === "true") {
      html.classList.add("dark-theme");
      toggle.checked = true;
    }

    toggle.addEventListener("change", function () {
      html.classList.toggle("dark-theme", this.checked);
      localStorage.setItem("darkTheme", this.checked);
    });
  });
</script>
{% endblock %}
