{% extends 'base.html' %}
{% load static %}

{% block title %}
    <title>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</title>
    <link rel="icon" type="image/x-icon" href="{% static 'icons/icons8-brutus-32.ico' %}">
    <link rel="stylesheet" href="{% static 'css/user_data.css' %}">
{% endblock %}

{% block body %}
<div class="username-display">
  {% if user.username %}
    <a href="/settings" class="login-link">üë§ {{ user.username }}</a>
    <a href="/wallet" class="login-link">({{ user.wallet }})</a>
  {% else %}
    üë§ –í–∏ –Ω–µ —É–≤—ñ–π—à–ª–∏ –≤ –∞–∫–∞—É–Ω—Ç<br>
    <a href="/login" class="login-link">–£–≤—ñ–π—Ç–∏</a>
  {% endif %}
  <div class="switch-wrapper">
    <label class="switch" title="–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Ç–µ–º—É">
      <input type="checkbox" id="themeToggle" aria-label="Theme toggle">
      <span class="slider"></span>
    </label>
  </div>
</div>

<div class="background" style="padding: 40px; display: flex; justify-content: center;">
  <div class="profile-container">
    <h2>–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h2>
    <p><strong>–Ü–º º—è:</strong> {{ user.username }}</p>
    <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ user.phone_number }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>–†–æ–ª—å:</strong> {{ user.role }}</p>
    {% if user.subscription != '–ù–µ–º–∞ –ø—ñ–¥–ø–∏—Å–∫–∏' %}
      <p><strong>–ó–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏:</strong> {{ user.subscription_end }}</p>
    {% else %}
      <p><strong>–ü—ñ–¥–ø–∏—Å–∫–∞:</strong> –ù–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–æ—ó –ø—ñ–¥–ø–∏—Å–∫–∏</p>
    {% endif %}
    <p><strong>–°—Ç–≤–æ—Ä–µ–Ω–æ –∑–∞–≤–¥–∞–Ω—å:</strong> {{ total_created }}</p>
    <p><strong>–í–∏–∫–æ–Ω–∞–Ω–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å:</strong> {{ total_completed }}</p>
    <!-- <p><strong>–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±–∞–ª—ñ–≤:</strong> {{ total_points }}</p> -->
  </div>
</div>

<div id="menu" class="styled-button" onclick="redirectToMenu()">
  üî•
  <span style="color: #6a5acd; text-decoration: none; font-weight: bold;">–ú–µ–Ω—é</span>
  üî•
</div>

<style>
html{
  height: 100%;
  margin: 0;
  padding: 0;
  background: linear-gradient(135deg, #1bb380, #2aca0a);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: Arial, sans-serif;
}
</style>

<script>
    function redirectToMenu() {
        window.location.href = "/menu/{{ user.id }}";
    }
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("themeToggle");
    const html = document.documentElement;

    if (localStorage.getItem("darkTheme") === "true") {
      html.classList.add("dark-theme");
      toggle.checked = true;
    }

    toggle.addEventListener("change", function () {
      html.classList.toggle("dark-theme", this.checked);
      localStorage.setItem("darkTheme", this.checked);
    });
  });
</script>
{% endblock %}
